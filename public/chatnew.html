<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind CSS-->
    <link href="./css/style.css" rel="stylesheet">

    <!-- Googel Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Nastaliq+Urdu:wght@400;500&display=swap" rel="stylesheet">

    <!-- AlpineJs Scripts -->
    <!-- alpine/tooltip v1.0 --> 
    <script defer src="./js/alpinetooltip.min.js"></script>
    <!-- @alpinejs/ui v3.12 -->
    <script defer src="./js/alpineui.min.js"></script>
    <!-- @alpinejs/focus v3.12 -->
    <script defer src="./js/alpinefocus.min.js"></script>
    <!-- alpinejs v3.12 -->
    <script defer src="./js/alpine.min.js"></script>

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="./css/swiper.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.3.45/css/materialdesignicons.min.css" />
    <meta name="description" content="wooqlaw Public Portal">
    <title>wooqlaw Public Portal</title>
</head>

<body x-data="{scrolAtTop: false}">

    <div x-data="chatBot()">
        <div class="flex flex-col flex-1 h-[100dvh] bg-violet-50" x-data="{newchat : true}">
            <div class="sticky top-0 flex items-center justify-between p-2 bg-white rounded-lg shadow">
                <div class="flex items-center gap-2 md:gap-3">
                    <a class="relative flex shrink-0" href="#">
                        <img class="w-12 h-12 rounded-full" src="images/kamransaeed.png" alt="kamran saeed">
                        <span class="top-0 left-9 absolute  w-2.5 h-2.5 bg-green-400 border-2 border-white rounded-full"></span>
                    </a>
                    <div class="flex items-center gap-8 md:gap-32">
                        <div class="content flex flex-col gap-0.5 md:gap-1">
                            <div class="flex items-center gap-2 ">
                                <a class="text-sm font-semibold md:text-base" href="#">
                                    Kamran Saeed
                                </a>
                                <a class="flex items-center justify-center w-10 h-4 font-medium text-white bg-green-500 rounded-full text-3xs md:text-2xs"
                                    href="">online</a>
                            </div>
                            <span class="text-xs font-medium text-gray-600 md:text-sm">Discussion on court documents with
                                client</span>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-center gap-1">
                    <a class="flex items-center justify-center rounded-lg w-9 h-9 hover:bg-gray-100" href="#">
                        <svg class="w-5 h-5 text-gray-900" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.293 4.29308C4.48053 4.10561 4.73484 4.00029 5 4.00029C5.26516 4.00029 5.51947 4.10561 5.707 4.29308L10 8.58608L14.293 4.29308C14.3852 4.19757 14.4956 4.12139 14.6176 4.06898C14.7396 4.01657 14.8708 3.98898 15.0036 3.98783C15.1364 3.98668 15.2681 4.01198 15.391 4.06226C15.5139 4.11254 15.6255 4.18679 15.7194 4.28069C15.8133 4.37458 15.8875 4.48623 15.9378 4.60913C15.9881 4.73202 16.0134 4.8637 16.0123 4.99648C16.0111 5.12926 15.9835 5.26048 15.9311 5.38249C15.8787 5.50449 15.8025 5.61483 15.707 5.70708L11.414 10.0001L15.707 14.2931C15.8892 14.4817 15.99 14.7343 15.9877 14.9965C15.9854 15.2587 15.8802 15.5095 15.6948 15.6949C15.5094 15.8803 15.2586 15.9855 14.9964 15.9878C14.7342 15.99 14.4816 15.8892 14.293 15.7071L10 11.4141L5.707 15.7071C5.5184 15.8892 5.2658 15.99 5.0036 15.9878C4.7414 15.9855 4.49059 15.8803 4.30518 15.6949C4.11977 15.5095 4.0146 15.2587 4.01233 14.9965C4.01005 14.7343 4.11084 14.4817 4.293 14.2931L8.586 10.0001L4.293 5.70708C4.10553 5.51955 4.00021 5.26525 4.00021 5.00008C4.00021 4.73492 4.10553 4.48061 4.293 4.29308Z" fill="#111928"/>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="flex items-center justify-center h-full" x-show="newchat == true">
                <!-- Modal content -->
                <div class="relative w-full max-w-sm bg-white rounded-lg shadow">
                    <!-- Modal header -->
                    <div class="flex items-start justify-between p-4 border-b rounded-t">
                        <h3 class="text-xl font-semibold text-gray-900">
                            New message
                        </h3>
                        <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center">
                            <svg aria-hidden="true" class="w-5 h-5 text-gray-900" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>
                    <!-- Modal body -->
                    <div class="p-6">
                        <div>
                            <label for="subject" class="block mb-2 text-sm font-medium text-gray-900">Subject</label>
                            <input type="text" id="subject" aria-describedby="helper-text-explanation" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Discussion on court documents with client">
                            <p id="helper-text-explanation" class="mt-2 text-sm text-gray-500">Max 30 Characters</p>
                        </div>
                    </div>
                    <!-- Modal footer -->
                    <div class="flex items-center justify-end p-6 border-t border-gray-200 rounded-b gap-x-2">
                        <button x-on:click="newchat = false" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Start Messaging</button>
                    </div>
                </div>
            </div>
            <div x-show="newchat == false"  id="messages" class="flex flex-col h-full p-3 space-y-4 overflow-y-auto scrolling-touch scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-violet-lighter scrollbar-w-2">
                <template x-for="(message, key) in messages">
                    <div>
                        <div class="flex gap-1 md:gap-3" :class="message.from=='bot'?'':'justify-end'">
                            <div class="flex flex-col gap-2" :class="message.from=='bot'?'order-2 items-start':'order-1 items-end'">
                                <div class="flex gap-3 md:gap-7">
                                    <span class="font-normal text-gray-500 text-2xs md:text-xs">Kamran Saeed</span>
                                    <span class="font-normal text-gray-600 text-2xs md:text-xs">01:45 AM</span>
                                </div>
                                <div class="flex items-center gap-1 text-center md:gap-2">
                                    <div class="flex flex-col max-w-lg space-y-2 leading-tight text-md" :class="message.from=='bot'?'order-1 items-end':'order-2 items-start'">
                                        <div>
                                            <span class="inline-block px-4 py-3 rounded-xl" :class="message.from=='bot'?'rounded-bl-none bg-violet-500 text-white':'rounded-br-none bg-gray-200 text-gray-900'" x-html="message.text"></span>
                                        </div>
                                    </div> 
                                    <div class="flex flex-col gap-1" :class="message.from=='bot'?'order-2 items-start':'order-1 items-end'">
                                        <span  class="flex items-center justify-center w-3 h-3 p-1 font-medium text-white bg-green-500 rounded-sm text-2xs md:text-xs md:h-5 md:w-5">
                                        R
                                        </span>
                                        <span  class="flex items-center justify-center w-3 h-3 p-1 font-medium text-white bg-gray-900 rounded-sm text-2xs md:text-xs md:h-5 md:w-5">
                                        D
                                        </span>
                                    </div>
                                    
                                </div>
                            </div>
                            <img :src="message.from=='bot'?'images/kamransaeed.png':'https://i.pravatar.cc/100?img=7'" alt="" class="w-8 h-8 rounded-full" :class="message.from=='bot'?'order-1':'order-2'">
                        </div>
                    </div>
                </template>
                <div x-show="botTyping" style="display: none;">
                    <div class="flex items-end">
                        <div class="flex flex-col items-start order-2 mx-2 space-y-2 leading-tight text-md">
                            <div><img src="https://support.signal.org/hc/article_attachments/360016877511/typing-animation-3x.gif" alt="..." class="w-16 ml-6 bg-violet-50"></div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-wrap items-start justify-center p-3 mx-auto bg-white rounded-lg shadow gap-x-16 w-fit">
                    <div class="flex items-center justify-start gap-x-2">
                        <img class="w-10 h-full rounded-full" src="https://via.placeholder.com/40x40"/>
                        <p class="text-sm leading-tight text-gray-800">Saiqa is awaiting for you to join video call</p>
                    </div>
                    <a href="./videocall.html" class="flex gap-x-2 items-center justify-center px-5 py-2.5 bg-blue-500 hover:bg-blue-600 shadow rounded-lg">
                        <svg class="w-5 h-5" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_8427_84409)">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 13V12C2 8.71252 2 7.06878 2.90796 5.96243C3.07418 5.75989 3.25989 5.57418 3.46243 5.40796C4.56878 4.5 6.21252 4.5 9.5 4.5C12.7875 4.5 14.4312 4.5 15.5376 5.40796C15.7401 5.57418 15.9258 5.75989 16.092 5.96243C16.7936 6.8173 16.9531 7.99303 16.9893 10L17.6584 9.67082C19.6042 8.69788 20.5772 8.2114 21.2886 8.65107C22 9.09075 22 10.1785 22 12.3541V12.6459C22 14.8215 22 15.9093 21.2886 16.3489C20.5772 16.7886 19.6042 16.3021 17.6584 15.3292L16.9893 15C16.9531 17.007 16.7936 18.1827 16.092 19.0376C15.9258 19.2401 15.7401 19.4258 15.5376 19.592C14.4312 20.5 12.7875 20.5 9.5 20.5C6.21252 20.5 4.56878 20.5 3.46243 19.592C3.25989 19.4258 3.07418 19.2401 2.90796 19.0376C2 17.9312 2 16.2875 2 13ZM13.5607 10.0607C14.1464 9.47487 14.1464 8.52513 13.5607 7.93934C12.9749 7.35355 12.0251 7.35355 11.4393 7.93934C10.8536 8.52513 10.8536 9.47487 11.4393 10.0607C12.0251 10.6464 12.9749 10.6464 13.5607 10.0607Z" fill="white"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_8427_84409">
                            <rect width="20" height="20" fill="white" transform="translate(0 0.5)"/>
                            </clipPath>
                            </defs>
                        </svg>                            
                        <p class="text-sm font-medium leading-tight text-white">Join Video Call</p>
                    </a>
                </div>
                <div class="inline-flex flex-col items-center justify-start px-3 py-2 mx-auto rounded-lg bg-red-50 w-fit">
                    <div class="inline-flex items-center justify-center gap-x-2">
                        <svg class="w-5 h-5" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11.4375V10.5625C2 7.68595 2 6.24768 2.77176 5.27962C2.91305 5.1024 3.07091 4.9399 3.24306 4.79446C4.18346 4 5.58064 4 8.375 4C11.1694 4 12.5665 4 13.5069 4.79446C13.6791 4.9399 13.837 5.1024 13.9782 5.27962C14.5746 6.02764 14.7101 7.0564 14.7409 8.81252L15.3096 8.52447C16.9636 7.67314 17.7906 7.24748 18.3953 7.63219C19 8.0169 19 8.96872 19 10.8723V11.1277C19 13.0313 19 13.9831 18.3953 14.3678C17.7906 14.7525 16.9636 14.3269 15.3096 13.4755L14.7409 13.1875C14.7101 14.9436 14.5746 15.9724 13.9782 16.7204C13.837 16.8976 13.6791 17.0601 13.5069 17.2055C12.5665 18 11.1694 18 8.375 18C5.58064 18 4.18346 18 3.24306 17.2055C3.07091 17.0601 2.91305 16.8976 2.77176 16.7204C2 15.7523 2 14.314 2 11.4375ZM11.8266 8.86558C12.3245 8.35301 12.3245 7.52199 11.8266 7.00942C11.3286 6.49686 10.5214 6.49686 10.0234 7.00942C9.52552 7.52199 9.52552 8.35301 10.0234 8.86558C10.5214 9.37814 11.3286 9.37814 11.8266 8.86558Z" fill="#EF4444"/>
                        </svg>
                        <p class="text-sm font-medium leading-tight text-red-500">You missed a video call invite from Saiqa.</p>
                    </div>
                    <div class="inline-flex items-end justify-start p-2">
                        <p class="text-sm font-medium leading-tight text-purple-700">Request a call back</p>
                    </div>
                </div>
            </div>
            <div x-show="newchat == false" class="w-full gap-1 p-1 bg-white border rounded-lg md:h-16 md:p-2 md:gap-2">
                <div class="relative flex items-center gap-1">
                    <div class="flex gap-1 md:gap-2">
                        <a class="flex items-center justify-center w-8 h-8 bg-gray-100 rounded-lg hover:bg-gray-200 shrink-0 md:w-10 md:h-10"
                            href="#">
                            <svg  class="w-5 h-5 md:w-6 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.75 9C12.75 8.58579 12.4142 8.25 12 8.25C11.5858 8.25 11.25 8.58579 11.25 9L11.25 11.25H9C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75H11.25V15C11.25 15.4142 11.5858 15.75 12 15.75C12.4142 15.75 12.75 15.4142 12.75 15L12.75 12.75H15C15.4142 12.75 15.75 12.4142 15.75 12C15.75 11.5858 15.4142 11.25 15 11.25H12.75V9Z" fill="#6B7280"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0574 1.25H11.9426C9.63424 1.24999 7.82519 1.24998 6.41371 1.43975C4.96897 1.63399 3.82895 2.03933 2.93414 2.93414C2.03933 3.82895 1.63399 4.96897 1.43975 6.41371C1.24998 7.82519 1.24999 9.63422 1.25 11.9426V12.0574C1.24999 14.3658 1.24998 16.1748 1.43975 17.5863C1.63399 19.031 2.03933 20.1711 2.93414 21.0659C3.82895 21.9607 4.96897 22.366 6.41371 22.5603C7.82519 22.75 9.63423 22.75 11.9426 22.75H12.0574C14.3658 22.75 16.1748 22.75 17.5863 22.5603C19.031 22.366 20.1711 21.9607 21.0659 21.0659C21.9607 20.1711 22.366 19.031 22.5603 17.5863C22.75 16.1748 22.75 14.3658 22.75 12.0574V11.9426C22.75 9.63423 22.75 7.82519 22.5603 6.41371C22.366 4.96897 21.9607 3.82895 21.0659 2.93414C20.1711 2.03933 19.031 1.63399 17.5863 1.43975C16.1748 1.24998 14.3658 1.24999 12.0574 1.25ZM3.9948 3.9948C4.56445 3.42514 5.33517 3.09825 6.61358 2.92637C7.91356 2.75159 9.62177 2.75 12 2.75C14.3782 2.75 16.0864 2.75159 17.3864 2.92637C18.6648 3.09825 19.4355 3.42514 20.0052 3.9948C20.5749 4.56445 20.9018 5.33517 21.0736 6.61358C21.2484 7.91356 21.25 9.62177 21.25 12C21.25 14.3782 21.2484 16.0864 21.0736 17.3864C20.9018 18.6648 20.5749 19.4355 20.0052 20.0052C19.4355 20.5749 18.6648 20.9018 17.3864 21.0736C16.0864 21.2484 14.3782 21.25 12 21.25C9.62177 21.25 7.91356 21.2484 6.61358 21.0736C5.33517 20.9018 4.56445 20.5749 3.9948 20.0052C3.42514 19.4355 3.09825 18.6648 2.92637 17.3864C2.75159 16.0864 2.75 14.3782 2.75 12C2.75 9.62177 2.75159 7.91356 2.92637 6.61358C3.09825 5.33517 3.42514 4.56445 3.9948 3.9948Z" fill="#6B7280"/>
                            </svg>
                        </a>
                    </div>
                    <input type="text" placeholder="Write your message..." autocomplete="off" autofocus="true" @keydown.enter="updateChat($event.target)" class="w-full py-2 pl-5 pr-5 text-gray-600 placeholder-gray-600 bg-gray-100 border-2 border-gray-200 rounded-full text-md focus:outline-none focus:placeholder-gray-400 focus:border-violet-500" x-ref="input" />
                    <div class="flex gap-1 md:gap-2">
                        <a class="flex items-center justify-center w-8 h-8 bg-gray-100 rounded-lg hover:bg-gray-200 shrink-0 md:w-10 md:h-10"
                            href="#">
                            <svg class="w-5 h-5 md:w-6 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M2 12.5V11.5C2 8.21252 2 6.56878 2.90796 5.46243C3.07418 5.25989 3.25989 5.07418 3.46243 4.90796C4.56878 4 6.21252 4 9.5 4C12.7875 4 14.4312 4 15.5376 4.90796C15.7401 5.07418 15.9258 5.25989 16.092 5.46243C16.7936 6.3173 16.9531 7.49303 16.9893 9.50002L17.6584 9.17082C19.6042 8.19788 20.5772 7.7114 21.2886 8.15107C22 8.59075 22 9.67853 22 11.8541V12.1459C22 14.3215 22 15.4093 21.2886 15.8489C20.5772 16.2886 19.6042 15.8021 17.6584 14.8292L16.9893 14.5C16.9531 16.507 16.7936 17.6827 16.092 18.5376C15.9258 18.7401 15.7401 18.9258 15.5376 19.092C14.4312 20 12.7875 20 9.5 20C6.21252 20 4.56878 20 3.46243 19.092C3.25989 18.9258 3.07418 18.7401 2.90796 18.5376C2 17.4312 2 15.7875 2 12.5ZM13.5607 9.56066C14.1464 8.97487 14.1464 8.02513 13.5607 7.43934C12.9749 6.85355 12.0251 6.85355 11.4393 7.43934C10.8536 8.02513 10.8536 8.97487 11.4393 9.56066C12.0251 10.1464 12.9749 10.1464 13.5607 9.56066Z" fill="#6D28D9"/>
                            </svg>
                        </a>
                        <a @click.prevent="updateChat($refs.input)" class="flex items-center justify-center w-8 h-8 rounded-lg shrink-0 md:w-10 md:h-10 bg-violet-700 hover:bg-violet-800"
                            href="javascript:;">
                            <svg class="w-5 h-5 md:w-6 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M18.1437 3.63083C16.9737 3.83896 15.3964 4.36262 13.1827 5.10051L8.17141 6.77094C6.39139 7.36428 5.1021 7.79468 4.19146 8.182C3.23939 8.58693 2.90071 8.86919 2.79071 9.0584C2.45191 9.64118 2.45191 10.361 2.79071 10.9437C2.90071 11.1329 3.23939 11.4152 4.19146 11.8201C5.1021 12.2075 6.39139 12.6379 8.17141 13.2312C8.19952 13.2406 8.22727 13.2498 8.25468 13.2589C8.63431 13.3852 8.94795 13.4895 9.22198 13.6328L14.5454 8.36811C14.8471 8.06974 15.3335 8.07243 15.6319 8.37413C15.9303 8.67583 15.9276 9.16229 15.6259 9.46067L10.3259 14.7022C10.4912 14.994 10.603 15.3302 10.7411 15.7453C10.7502 15.7727 10.7594 15.8005 10.7688 15.8286C11.3621 17.6086 11.7925 18.8979 12.1799 19.8085C12.5848 20.7606 12.867 21.0993 13.0563 21.2093C13.639 21.5481 14.3588 21.5481 14.9416 21.2093C15.1308 21.0993 15.4131 20.7606 15.818 19.8085C16.2053 18.8979 16.6357 17.6086 17.2291 15.8286L18.8995 10.8173C19.6374 8.60363 20.161 7.02627 20.3692 5.85629C20.5783 4.68074 20.4185 4.1814 20.1185 3.88146C19.8186 3.58152 19.3193 3.42171 18.1437 3.63083ZM17.8746 2.11797C19.1768 1.88632 20.3496 1.93941 21.2051 2.79491C22.0606 3.65041 22.1137 4.82322 21.882 6.12542C21.6518 7.41975 21.0903 9.10415 20.3794 11.2367L18.6745 16.3515C18.096 18.0869 17.6465 19.4354 17.232 20.41C16.8322 21.35 16.3882 22.1457 15.7139 22.5377C14.6537 23.1541 13.3442 23.1541 12.284 22.5377C11.6096 22.1457 11.1657 21.35 10.7658 20.41C10.3513 19.4354 9.90184 18.0869 9.32338 16.3515L9.31105 16.3145C9.10838 15.7065 9.04661 15.5416 8.95909 15.4109C8.86114 15.2646 8.73545 15.1389 8.58913 15.0409C8.4584 14.9534 8.29348 14.8916 7.68549 14.689L7.64845 14.6766C5.91306 14.0982 4.56463 13.6487 3.59005 13.2342C2.64996 12.8343 1.85431 12.3904 1.46228 11.716C0.845907 10.6558 0.845908 9.34634 1.46228 8.28611C1.85431 7.61177 2.64996 7.16781 3.59005 6.76797C4.56464 6.35345 5.91309 5.90397 7.64852 5.3255L12.7633 3.62057C14.8959 2.9097 16.5803 2.34822 17.8746 2.11797Z" fill="white"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function chatBot() {
    return {
        prompts: [
            ["hi", "hey", "hello", "good morning", "good afternoon"],
            ["how are you", "how is life", "how are things"],
            ["what are you doing", "what is going on", "what is up"],
            ["how old are you"],
            ["who are you", "are you human", "are you bot", "are you human or bot"],
            ["who created you", "who made you"],
            ["your name please", "your name", "may i know your name", "what is your name", "what call yourself"],
            ["i love you"],
            ["happy", "good", "fun", "wonderful", "fantastic", "cool"],
            ["bad", "bored", "tired"],
            ["help me", "tell me story", "tell me joke"],
            ["ah", "yes", "ok", "okay", "nice"],
            ["bye", "good bye", "goodbye", "see you later"],
            ["what should i eat today"],
            ["bro"],
            ["what", "why", "how", "where", "when"],
            ["no", "not sure", "maybe", "no thanks"],
            [""],
            ["haha", "ha", "lol", "hehe", "funny", "joke"],
            ["flip a coin", "heads or tails", "tails or heads", "head or tails", "head or tail", "tail or heads", "tail or head"],
            ["beer","buy me a beer","want a beer"]
        ],
        replies: [
            ["Hello!", "Hi!", "Hey!", "Hi there!", "Howdy"],
            ["Fine... how are you?", "Pretty well, how are you?", "Fantastic, how are you?"],
            ["Nothing much", "About to go to sleep", "Can you guess?", "I don't know actually"],
            ["I am infinite"],
            ["I am just a bot", "I am a bot. What are you?"],
            ["The one true God, JavaScript"],
            ["I am nameless", "I don't have a name"],
            ["I love you too", "Me too"],
            ["Have you ever felt bad?", "Glad to hear it"],
            ["Why?", "Why? You shouldn't!", "Try watching TV"],
            ["What about?", "Once upon a time..."],
            ["Tell me a story", "Tell me a joke", "Tell me about yourself"],
            ["Bye", "Goodbye", "See you later"],
            ["Sushi", "Pizza"],
            ["Bro!"],
            ["Great question"],
            ["That's ok", "I understand", "What do you want to talk about?"],
            ["Please say something :("],
            ["Haha!", "Good one!"],
            ["Heads", "Tails"],
            ["You can buy me a beer at: <a href=\"https://www.buymeacoffee.com/scottwindon\" target=\"_blank\" style=\"text-decoration:underline;\">https://www.buymeacoffee.com/scottwindon</a>"]
        ],
        alternative: ["Same", "Go on...", "Bro...", "Try again", "I'm listening...", "I don't understand :/"],
        coronavirus: ["Please stay home", "Wear a mask", "Fortunately, I don't have COVID", "These are uncertain times"],
        botTyping: false,
        messages: [{
            from: 'bot',
            text: 'Hello world!'
        }],
        output: function(input) {
            let product;

            // Regex remove non word/space chars
            // Trim trailing whitespce
            // Remove digits - not sure if this is best
            // But solves problem of entering something like 'hi1'

            let text = input.toLowerCase().replace(/[^\w\s]/gi, "").replace(/[\d]/gi, "").trim();
            text = text
                .replace(/ a /g, " ") // 'tell me a story' -> 'tell me story'
                .replace(/i feel /g, "")
                .replace(/whats/g, "what is")
                .replace(/please /g, "")
                .replace(/ please/g, "")
                .replace(/r u/g, "are you");

            if (this.compare(this.prompts, this.replies, text)) {
                // Search for exact match in `prompts`
                product = this.compare(this.prompts, this.replies, text);
            } else if (text.match(/thank/gi)) {
                product = "You're welcome!"
            } else if (text.match(/(corona|covid|virus)/gi)) {
                // If no match, check if message contains `coronavirus`
                product = this.coronavirus[Math.floor(Math.random() * this.coronavirus.length)];
            } else {
                // If all else fails: random this.alternative
                product = this.alternative[Math.floor(Math.random() * this.alternative.length)];
            }

            // Update DOM
            this.addChat(input, product);
        },
        compare: function(promptsArray, repliesArray, string) {
            let reply;
            let replyFound = false;
            for (let x = 0; x < promptsArray.length; x++) {
                for (let y = 0; y < promptsArray[x].length; y++) {
                    if (promptsArray[x][y] === string) {
                        let replies = repliesArray[x];
                        reply = replies[Math.floor(Math.random() * replies.length)];
                        replyFound = true;
                        // Stop inner loop when input value matches this.prompts
                        break;
                    }
                }
                if (replyFound) {
                    // Stop outer loop when reply is found instead of interating through the entire array
                    break;
                }
            }
            if (!reply) {
                for (let x = 0; x < promptsArray.length; x++) {
                    for (let y = 0; y < promptsArray[x].length; y++) {
                        if (this.levenshtein(promptsArray[x][y], string) >= 0.75) {
                            let replies = repliesArray[x];
                            reply = replies[Math.floor(Math.random() * replies.length)];
                            replyFound = true;
                            // Stop inner loop when input value matches this.prompts
                            break;
                        }
                    }
                    if (replyFound) {
                        // Stop outer loop when reply is found instead of interating through the entire array
                        break;
                    }
                }
            }
            return reply;
        },
        levenshtein: function(s1, s2) {
            var longer = s1;
            var shorter = s2;
            if (s1.length < s2.length) {
                longer = s2;
                shorter = s1;
            }
            var longerLength = longer.length;
            if (longerLength == 0) {
                return 1.0;
            }
            return (longerLength - this.editDistance(longer, shorter)) / parseFloat(longerLength);
        },
        editDistance: function(s1, s2) {
            s1 = s1.toLowerCase();
            s2 = s2.toLowerCase();

            var costs = new Array();
            for (var i = 0; i <= s1.length; i++) {
                var lastValue = i;
                for (var j = 0; j <= s2.length; j++) {
                    if (i == 0)
                        costs[j] = j;
                    else {
                        if (j > 0) {
                            var newValue = costs[j - 1];
                            if (s1.charAt(i - 1) != s2.charAt(j - 1))
                                newValue = Math.min(Math.min(newValue, lastValue),
                                    costs[j]) + 1;
                            costs[j - 1] = lastValue;
                            lastValue = newValue;
                        }
                    }
                }
                if (i > 0)
                    costs[s2.length] = lastValue;
            }
            return costs[s2.length];
        },
        addChat: function(input, product) {

            // Add user message
            this.messages.push({
                from: 'user',
                text: input
            });

            // Keep messages at most recent
            this.scrollChat();

            // Fake delay to seem "real"
            setTimeout(() => {
                this.botTyping = true;
                this.scrollChat();
            }, 1000)

            // add bit message with Fake delay to seem "real"
            setTimeout(() => {
                this.botTyping = false;
                this.messages.push({
                    from: 'bot',
                    text: product
                });
                this.scrollChat();
            }, ((product.length / 10) * 1000) + (Math.floor(Math.random() * 2000) + 1500))

        },
        scrollChat: function() {
            const messagesContainer = document.getElementById("messages");
            messagesContainer.scrollTop = messagesContainer.scrollHeight - messagesContainer.clientHeight;
            setTimeout(() => {
                messagesContainer.scrollTop = messagesContainer.scrollHeight - messagesContainer.clientHeight;
            }, 100);
        },
        updateChat: function(target) {
            if (target.value.trim()) {
                this.output(target.value.trim());
                target.value = '';
            }
        }
    }
}
    </script>

</body>

</html>